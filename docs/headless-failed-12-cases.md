# 헤드리스 모드 실패 12건 정리

로컬 헤드리스 실행 시 **실제 시나리오 실패**로 기록된 12건 목록과 가능한 원인 정리.

---

## 1. PCW (chromium) – 8건

| KPA | 시나리오 | 가능한 실패 요인 |
|-----|----------|------------------|
| **107** | 댓글 신고 기능 검증 | 댓글 탭/더보기/신고 플로우 후 **Then 순서**: feature에 "더보기 레이어 노출"이 신고 완료 후에 나와 있어, 실제 플로우와 불일치 시 assertion 실패. 또는 신고하기/등록하기/확인 버튼 셀렉터·대기 시간 부족. |
| **112** | 무료 회차 정주행 기능 검증 | **Then**이 `body`만 attached 확인으로 완화돼 있음. 실패 시 정주행 버튼 미노출, 가이드 팝업 확인 버튼 미클릭, 또는 "뷰어 엔드 영역" 대기 타임아웃(8초). |
| **127** | 무료 회차에서 정주행 기능 검증 | 112와 동일 플로우(정주행 아이콘 → 가이드 확인 → 스크롤 → 엔드 영역). 정주행 버튼/가이드/엔드 영역 셀렉터 또는 타이밍. |
| **032** | 최근본 작품 정렬 및 실시간 랭킹 작품 감상 | "메인홈 > 웹툰 > 실시간 랭킹" 이동 후 랭킹 링크 부재 시 throw. 또는 최근본 최상단에 방금 감상 작품 노출 assertion(UI 반영 지연). |
| **066** | 작품 정보가 올바르게 노출되는지 확인 | **작가명/장르/누적 열람·좋아요** `toBeVisible(timeout: 6000)`. 페이지 구조·텍스트 변경 시 실패. |
| **085-1** | 대여권 환불 검증 (이용권 내역에서) | 취소 가능한 **대여권** 행을 스크롤로 찾음(최대 40번). 해당 내역이 없거나 DOM/텍스트 패턴 변경 시 실패. |
| **085-2** | 소장권 환불 검증 (이용권 내역에서) | 085-1과 동일. 취소 가능한 **소장권** 행 미존재 또는 셀렉터 불일치. |
| **093** | 회차 리스트와 뷰어 이동 검증 | `a[href*="/viewer/"]` 또는 회차 텍스트 대기 10초. 회차 리스트 구조 변경 또는 클릭 후 `/viewer/` URL 전환 지연. |

---

## 2. MW (chromium-mw) – 4건

| KPA | 시나리오 | 가능한 실패 요인 |
|-----|----------|------------------|
| **073** | 모바일 웹에서 첫 화 보기 및 뷰어 진입 | 모바일 뷰포트(375x667)에서 작품홈 → "첫 화 보기" 탭 → "[뷰어로 보기]" 버튼. MW 전용 UI/텍스트 차이로 셀렉터 미매칭 가능. |
| **074** | 모바일 웹에서 첫 화 보기 및 다음 화 보기 기능 검증 | "첫 화 보기" → 스크롤 → "[다음화 보기]" 클릭. MW에서 버튼/영역 텍스트나 구조가 다르면 실패. |
| **070** | 더보기 레이어 팝업의 동작 검증 (MW 전용) | 작품홈에서 **더보기** 버튼을 찾지 못하면 throw. MW에서 버튼 위치/aria/클래스가 다르면 실패. "이용권 내역"·"취소" 텍스트 없으면 assertion 실패. |
| **071** | 이용권 내역 화면으로 이동 | 로그인 → 작품 클릭 → "대여권 n장 소장권 n장 > 영역에서 > 아이콘" 클릭. MW 레이아웃이 PC와 달라 해당 영역/아이콘 셀렉터 미매칭 가능. |

---

## 요약

- **PCW**: 댓글 신고(107), 정주행(112·127), 최근본/랭킹(032), 작품 정보 노출(066), 이용권 환불(085-1·085-2), 회차→뷰어(093).
- **MW**: 첫 화/뷰어(073·074), 더보기 레이어(070), 이용권 내역(071).

**공통 가능 원인**: (1) UI/텍스트 변경으로 인한 셀렉터·assertion 불일치, (2) 데이터/상태 의존(로그인, 이용권 보유, 랭킹/최근본 반영 시점), (3) 대기 시간 부족(로딩·스크롤·팝업).  
**확인 방법**: `npx playwright test --project=chromium <경로>` 또는 `--project=chromium-mw <경로>` 로 해당 스펙만 실행 후 `npx playwright show-report` 로 실패 스텝·스크린샷 확인.
